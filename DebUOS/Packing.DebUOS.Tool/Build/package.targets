<Project>
  <Target Name="DebUOSPackingWriteArgs" AfterTargets="Publish">
    <PropertyGroup>
      <!-- 工作路径 -->
      <DebUOSPackingWorkFolder>$([MSBuild]::NormalizePath($(IntermediateOutputPath), 'DebUOSPacking'))</DebUOSPackingWorkFolder>

      <!-- 参数文件 -->
      <DebUOSPackingArgsFile>$([MSBuild]::NormalizePath($(DebUOSPackingWorkFolder), 'DebUOSPackingArgs.coin'))</DebUOSPackingArgsFile>
    </PropertyGroup>
    <ItemGroup>
      <!-- COIN 格式的配置文件 https://github.com/dotnet-campus/dotnetCampus.Configurations -->
      <DebUOSPackingWriteArgLine Include=">"/>
      <DebUOSPackingWriteArgLine Include="WorkFolder"/>
      <DebUOSPackingWriteArgLine Include="$(DebUOSPackingWorkFolder)"/>
      <DebUOSPackingWriteArgLine Include=">"/>
      <DebUOSPackingWriteArgLine Include="PublishFolder"/>
      <DebUOSPackingWriteArgLine Include="$([MSBuild]::NormalizePath($(MSBuildProjectDirectory), $(PublishDir)))"/>
      <DebUOSPackingWriteArgLine Include=">"/>
    </ItemGroup>
    <WriteLinesToFile File="$(DebUOSPackingArgsFile)" Lines="@(DebUOSPackingWriteArgLine)" Overwrite="True" />
    <Warning Text="Publish $(DebUOSPackingWorkFolder)"/>
  </Target>
</Project>